<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AniSuki</title>
  <link rel="icon" type="image/png" href="logoPic.png" />
  <link rel="stylesheet" href="browseStyle.css" />
</head>
<body>
  <div id="navbar"></div>
  <script src="Javascripts/headerScript.js"></script>

  <div class="container">
    <div class="search-bar">
      <img src="icons/Search.png" alt="Search" width="20" height="20" />
      <input type="text" placeholder="Search" />
    </div>

    <div class="catalogs">
      <div class="catalog">
        <div class="catalog-label">Genre</div>
        <div class="dropdown">
          <select>
            <option>All</option>
            <option>Action</option>
            <option>Romance</option>
            <option>Comedy</option>
            <option>Drama</option>
            <option>Fantasy</option>
            <option>Adventure</option>
            <option>Horror</option>
            <option>Science Fiction</option>
            <option>Thriller</option>
            <option>Slice of Life</option>
            <option>Supernatural</option>
            <option>Mystery</option>
            <option>Sports</option>
            <option>Music</option>
            <option>Historical</option>
            <option>Mecha</option>
            <option>Psychological</option>
            <option>Ecchi</option>
            <option>Magic</option>
            <option>Kids</option>
            <option>School</option>
            <option>Samurai</option>
            <option>Military</option>
            <option>Super Power</option>
            <option>Demons</option>
            <option>Shoujo</option>
            <option>Shounen</option>
            <option>Seinen</option>
            <option>Josei</option>
            <option>Isekai</option>
          </select>
        </div>
      </div>

      <div class="catalog">
        <div class="catalog-label">Year</div>
        <div class="dropdown">
          <select>
            <option>All</option>
            <option>2025</option>
            <option>2024</option>
            <option>2023</option>
            <option>2022</option>
            <option>2021</option>
            <option>2020</option>
            <option>2019</option>
            <option>2018</option>
            <option>2017</option>
            <option>2016</option>
            <option>2015</option>
            <option>2014</option>
            <option>2013</option>
            <option>2012</option>
            <option>2011</option>
            <option>2010</option>
            <option>2009</option>
            <option>2008</option>
            <option>2007</option>
            <option>2006</option>
            <option>2005</option>
            <option>2004</option>
            <option>2003</option>
            <option>2002</option>
            <option>2001</option>
            <option>2000</option>
            <option>Before 2000</option>
          </select>
        </div>
      </div>

      <div class="catalog">
        <div class="catalog-label">Region</div>
        <div class="dropdown">
          <select>
            <option>All</option>
            <option>Japan</option>
            <option>China</option>
            <option>Korea</option>
          </select>
        </div>
      </div>

      <div class="catalog">
        <div class="catalog-label">Status</div>
        <div class="dropdown">
          <select>
            <option>All</option>
            <option>Releasing</option>
            <option>Completed</option>
            <option>Upcoming</option>
            <option>Cancelled</option>
            <option>Ongoing</option>
            <option>Unknown</option>
          </select>
        </div>
      </div>

      <div class="catalog">
        <div class="catalog-label">Sort By</div>
        <div class="dropdown">
          <select>
            <option>Popularity</option>
            <option>Newest</option>
            <option>Rating</option>
          </select>
        </div>
      </div>
    </div>

    <div id="anime-section" class="results"></div>
  </div>

  <div id="footer"></div>

  

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      let allAnime = [];

      // Render anime cards
      function renderAnimeList(animeList) {
        const container = document.getElementById('anime-section');
        container.innerHTML = '';

        if (animeList.length === 0) {
          container.innerHTML = '<div class="no-results">No anime found.</div>';
          return;
        }

        animeList.forEach(anime => {
          const card = document.createElement('div');
          card.className = 'anime-card';

          const wrapper = document.createElement('div');
          wrapper.style.position = 'relative';

          const link = document.createElement('a');
          link.href = `animeDetail.html?id=${encodeURIComponent(anime.id)}`;

          const img = document.createElement('img');
          img.src = anime.image;
          img.className = 'anime-img';
          img.alt = anime.title;
          link.appendChild(img);

          wrapper.appendChild(link);

          const name = document.createElement('div');
          name.className = 'anime-title';
          name.textContent = anime.title;

          card.appendChild(wrapper);
          card.appendChild(name);
          container.appendChild(card);
        });
      }

      // Get filter values
      function getFilters() {
        const search = document.querySelector('.search-bar input').value.trim().toLowerCase();
        const selects = document.querySelectorAll('.catalog select');
        return {
          genre: selects[0].value,
          year: selects[1].value,
          region: selects[2].value,
          status: selects[3].value,
          sort: selects[4].value,
          search
        };
      }

      // Filter anime based on filters
      function filterAnime() {
        const { genre, year, region, status, sort, search } = getFilters();

        let filtered = allAnime.filter(anime => {
          // Search by title
          if (search && !anime.title.toLowerCase().includes(search)) return false;

          // Genre filter (check if anime.genres array contains the selected genre)
          if (genre !== 'All' && !(anime.genres && anime.genres.includes(genre))) return false;

          // Year filter
          if (year !== 'All') {
            if (year === 'Before 2000') {
              if (!(anime.year && anime.year < 2000)) return false;
            } else if (!(anime.year && anime.year == year)) {
              return false;
            }
          }

          // Region filter
          if (region !== 'All' && anime.region !== region) return false;

          // Status filter
          if (status !== 'All' && anime.status !== status) return false;

          return true;
        });

        // Sorting
        if (sort === 'Popularity') {
          filtered.sort((a, b) => (b.popularity || 0) - (a.popularity || 0));
        } else if (sort === 'Newest') {
          filtered.sort((a, b) => (b.year || 0) - (a.year || 0));
        } else if (sort === 'Rating') {
          filtered.sort((a, b) => (b.rating || 0) - (a.rating || 0));
        }

        renderAnimeList(filtered);
      }

      // Fetch the anime data and initialize
      fetch('Json file/allAnime.json')
        .then(response => response.json())
        .then(data => {
          allAnime = data;
          filterAnime();

          // Add event listeners after data loaded
          document.querySelector('.search-bar input').addEventListener('input', filterAnime);
          document.querySelectorAll('.catalog select').forEach(select => {
            select.addEventListener('change', filterAnime);
          });
        });
    });
  </script>

  
  <script>
    fetch('footer.html')
      .then(response => response.text())
      .then(html => {
        document.getElementById('footer').innerHTML = html;
      });
  </script>
</body>
</html>
