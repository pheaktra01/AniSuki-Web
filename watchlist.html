<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AniSuki - History</title>
  <link rel="icon" type="image/png" href="logoPic.png" />
  <link rel="stylesheet" href="historyStyle.css" />
</head>
<body>
  <div id="navbar"></div>
  <script src="Javascripts/headerScript.js"></script>

  <div class="container">
    <h1 style="text-align: center;">My Anime List</h1>
    <div class="tabs">
      <button class="tab active" id="watchlist-tab"><h3>Watchlist</h3></button>
      <button class="tab" id="history-tab"><h3>Watch History</h3></button>
    </div>

    <!-- WATCHLIST -->
    <div class="tab-content" id="watchlist-content">
      <div class="empty-state" id="watchlist-empty">
        <img src="icons/miko-fox.jpg" alt="" style="width: 300px;">
        <p>Your watchlist is empty.</p>
        <p>Let's go find some!</p>
        <a href="home.html"><button>Home Page</button></a>
      </div>

      <!-- Example watchlist item: remove or duplicate -->
      <!-- <div class="watchlist-card">
        <p>Sample Watchlist Item</p>
      </div> -->
    </div>

    <!-- HISTORY -->
    <div class="tab-content" id="history-content" style="display: none;">
      <div class="empty-state" id="history-empty">
        <img src="icons/miko-fox.jpg" alt="">
        <p>Your watch history is empty.</p>
        <p>Let's go find some!</p>
        <a href="home.html"><button>Home Page</button></a>
      </div>

      <div class="animehistory">

        <div class="history-card">
          <img src="poster/Frieren-Beyond-Journeys-End.png" alt="Anime Poster" class="poster" />
          <div class="info">
            <a href="watchAnime.html" style="color: inherit; text-decoration: none;">
              <div class="anime-title">Frieren: Beyond Journey's End</div>
              <div class="episode-number">EP 1</div>
              <div class="episode-title">The Journey Begins</div>
            </a>
          </div>
          <div class="card-actions">
            <div class="more-options" title="More options">⋮</div>
            <div class="more-menu">
              <button class="menu-item delete-btn">Delete</button>
              <a href="watchAnime.html"><button class="menu-item">Play Now</button></a>
              <a href="animeDetail.html"><button class="menu-item">View Details</button></a>
            </div>
          </div>
        </div>
        
        <div class="history-card">
          <img src="poster/Frieren-Beyond-Journeys-End.png" alt="Anime Poster" class="poster" />
          <div class="info">
            <a href="watchAnime.html" style="color: inherit; text-decoration: none;">
              <div class="anime-title">Frieren: Beyond Journey's End</div>
              <div class="episode-number">EP 1</div>
              <div class="episode-title">The Journey Begins</div>
            </a>
          </div>
          <div class="card-actions">
            <div class="more-options" title="More options">⋮</div>
            <div class="more-menu">
              <button class="menu-item delete-btn">Delete</button>
              <button class="menu-item">Add to Favorites</button>
              <a href="animeDetail.html">
                <button class="menu-item">View Details</button>
              </a>
            </div>
          </div>
        </div>

        <div class="history-card">
          <img src="poster/Frieren-Beyond-Journeys-End.png" alt="Anime Poster" class="poster" />
          <div class="info">
            <a href="watchAnime.html" style="color: inherit; text-decoration: none;">
              <div class="anime-title">Frieren: Beyond Journey's End</div>
              <div class="episode-number">EP 1</div>
              <div class="episode-title">The Journey Begins</div>
            </a>
          </div>
          <div class="card-actions">
            <div class="more-options" title="More options">⋮</div>
            <div class="more-menu">
              <button class="menu-item delete-btn">Delete</button>
              <button class="menu-item">Add to Favorites</button>
              <a href="animeDetail.html">
                <button class="menu-item">View Details</button>
              </a>
            </div>
          </div>
        </div>

        <div class="history-card">
          <img src="poster/Frieren-Beyond-Journeys-End.png" alt="Anime Poster" class="poster" />
          <div class="info">
            <a href="watchAnime.html" style="color: inherit; text-decoration: none;">
              <div class="anime-title">Frieren: Beyond Journey's End</div>
              <div class="episode-number">EP 1</div>
              <div class="episode-title">The Journey Begins</div>
            </a>
          </div>
          <div class="card-actions">
            <div class="more-options" title="More options">⋮</div>
            <div class="more-menu">
              <button class="menu-item delete-btn">Delete</button>
              <button class="menu-item">Add to Favorites</button>
              <a href="animeDetail.html">
                <button class="menu-item">View Details</button>
              </a>
            </div>
          </div>
        </div>


        <div class="history-card">
          <img src="poster/Frieren-Beyond-Journeys-End.png" alt="Anime Poster" class="poster" />
          <div class="info">
            <a href="watchAnime.html" style="color: inherit; text-decoration: none;">
              <div class="anime-title">Frieren: Beyond Journey's End</div>
              <div class="episode-number">EP 1</div>
              <div class="episode-title">The Journey Begins</div>
            </a>
          </div>
          <div class="card-actions">
            <div class="more-options" title="More options">⋮</div>
            <div class="more-menu">
              <button class="menu-item delete-btn">Delete</button>
              <button class="menu-item">Add to Favorites</button>
              <a href="animeDetail.html">
                <button class="menu-item">View Details</button>
              </a>
            </div>
          </div>
        </div>

        <!-- add history more here -->

      </div>
    </div>
  </div>

  <!-- JS: Tabs and Dynamic State -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const historyContainer = document.querySelector('.animehistory');
      const historyEmpty = document.getElementById('history-empty');

      const watchlistContainer = document.getElementById('watchlist-content');
      const watchlistEmpty = document.getElementById('watchlist-empty');

      function updateEmptyStates() {
        // Check History
        if (!historyContainer.querySelector('.history-card')) {
          historyEmpty.style.display = 'block';
        } else {
          historyEmpty.style.display = 'none';
        }

        // Check Watchlist
        if (!watchlistContainer.querySelector('.watchlist-card')) {
          watchlistEmpty.style.display = 'block';
        } else {
          watchlistEmpty.style.display = 'none';
        }
      }

      updateEmptyStates(); // Initial check

      // Tab switching
      document.getElementById('watchlist-tab').onclick = function () {
        this.classList.add('active');
        document.getElementById('history-tab').classList.remove('active');
        document.getElementById('watchlist-content').style.display = '';
        document.getElementById('history-content').style.display = 'none';
      };

      document.getElementById('history-tab').onclick = function () {
        this.classList.add('active');
        document.getElementById('watchlist-tab').classList.remove('active');
        document.getElementById('history-content').style.display = '';
        document.getElementById('watchlist-content').style.display = 'none';
      };

      // Delete functionality
      document.querySelectorAll('.delete-btn').forEach(btn => {
        btn.addEventListener('click', function () {
          const card = btn.closest('.history-card');
          if (card) {
            card.remove();
            updateEmptyStates();
          }
        });
      });

      // Toggle more options
      document.querySelectorAll('.more-options').forEach(btn => {
        btn.addEventListener('click', function (e) {
          e.stopPropagation();
          const menu = btn.parentElement.querySelector('.more-menu');
          document.querySelectorAll('.more-menu').forEach(m => {
            if (m !== menu) m.style.display = 'none';
          });
          menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
        });
      });

      document.addEventListener('click', function (event) {
        if (!event.target.closest('.card-actions')) {
          document.querySelectorAll('.more-menu').forEach(menu => menu.style.display = 'none');
        }
      });
    });
  </script>

  <!-- Footer -->
  <div id="footer"></div>
  <script>
    fetch('footer.html')
      .then(response => response.text())
      .then(html => {
        document.getElementById('footer').innerHTML = html;
      });
  </script>
</body>
</html>
